# to build java version of plots

# script location
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"

WD=$PWD

# go into this location
cd $DIR

if [ ! -f xchart-3.6.4.jar ]; then
    wget -U "Any User Agent" https://repo1.maven.org/maven2/org/knowm/xchart/xchart/3.6.4/xchart-3.6.4.jar
fi
if [ ! -f mjson-1.4.1.jar ]; then
    wget -U "Any User Agent" https://repo1.maven.org/maven2/org/sharegov/mjson/1.4.1/mjson-1.4.1.jar
fi

if [ ! -d bin ]; then
    mkdir bin
fi
if [ -f IcarusStats.jar ]; then
    rm IcarusStats.jar
fi

javac -d bin -cp xchart-3.6.4.jar:mjson-1.4.1.jar:. IcarusStats.java
echo "Main-Class: IcarusStats" > MANIFEST.MF
cd bin
jar -cvfm IcarusStats.jar ../MANIFEST.MF *
mv IcarusStats.jar ..
cd ..
rm -rf bin/
rm MANIFEST.MF
echo done.

# go back to where script was executed from
cd $WD